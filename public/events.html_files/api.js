/*
 * Promise Polyfill by:
 * https://github.com/taylorhakes/promise-polyfill
 * Released under the MIT license
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b():"function"==typeof define&&define.amd?define(b):b()}(0,function(){function g(a){var c=this.constructor;return this.then(function(e){return c.resolve(a()).then(function(){return e})},function(e){return c.resolve(a()).then(function(){return c.reject(e)})})}function m(a){return !(!a||"undefined"==typeof a.length)}function s(){}function p(a){if(!(this instanceof p)){throw new TypeError("Promises must be constructed via new")}if("function"!=typeof a){throw new TypeError("not a function")}this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],d(a,this)}function q(a,c){for(;3===a._state;){a=a._value}0!==a._state?(a._handled=!0,p._immediateFn(function(){var i=1===a._state?c.onFulfilled:c.onRejected;if(null!==i){var e;try{e=i(a._value)}catch(f){return void h(c.promise,f)}j(c.promise,e)}else{(1===a._state?j:h)(c.promise,a._value)}})):a._deferreds.push(c)}function j(a,c){try{if(c===a){throw new TypeError("A promise cannot be resolved with itself.")}if(c&&("object"==typeof c||"function"==typeof c)){var i=c.then;if(c instanceof p){return a._state=3,a._value=c,void v(a)}if("function"==typeof i){return void d(function(l,o){return function(){l.apply(o,arguments)}}(i,c),a)}}a._state=1,a._value=c,v(a)}catch(f){h(a,f)}}function h(a,c){a._state=2,a._value=c,v(a)}function v(a){2===a._state&&0===a._deferreds.length&&p._immediateFn(function(){a._handled||p._unhandledRejectionFn(a._value)});for(var c=0,f=a._deferreds.length;f>c;c++){q(a,a._deferreds[c])}a._deferreds=null}function d(a,c){var i=!1;try{a(function(l){i||(i=!0,j(c,l))},function(l){i||(i=!0,h(c,l))})}catch(f){if(i){return}i=!0,h(c,f)}}var b=setTimeout;p.prototype["catch"]=function(a){return this.then(null,a)},p.prototype.then=function(a,c){var f=new this.constructor(s);return q(this,new function(i,l,o){this.onFulfilled="function"==typeof i?i:null,this.onRejected="function"==typeof l?l:null,this.promise=o}(a,c,f)),f},p.prototype["finally"]=g,p.all=function(a){return new p(function(w,l){function n(i,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var r=o.then;if("function"==typeof r){return void r.call(o,function(t){n(i,t)},l)}}e[i]=o,0==--c&&w(e)}catch(f){l(f)}}if(!m(a)){return l(new TypeError("Promise.all accepts an array"))}var e=Array.prototype.slice.call(a);if(0===e.length){return w([])}for(var c=e.length,x=0;e.length>x;x++){n(x,e[x])}})},p.resolve=function(a){return a&&"object"==typeof a&&a.constructor===p?a:new p(function(c){c(a)})},p.reject=function(a){return new p(function(c,e){e(a)})},p.race=function(a){return new p(function(n,l){if(!m(a)){return l(new TypeError("Promise.race accepts an array"))}for(var e=0,c=a.length;c>e;e++){p.resolve(a[e]).then(n,l)}})},p._immediateFn="function"==typeof setImmediate&&function(a){setImmediate(a)}||function(a){b(a,0)},p._unhandledRejectionFn=function(a){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};var k=function(){if("undefined"!=typeof self){return self}if("undefined"!=typeof window){return window}if("undefined"!=typeof global){return global}throw Error("unable to locate global object")}();"Promise" in k?k.Promise.prototype["finally"]||(k.Promise.prototype["finally"]=g):k.Promise=p});

/*
 * Fetch Polyfill by:
 * https://github.com/github/fetch
 * Released under the MIT license
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(exports):typeof define==="function"&&define.amd?define(["exports"],a):(a((b.WHATWGFetch={})))}(this,(function(f){var i=(typeof globalThis!=="undefined"&&globalThis)||(typeof self!=="undefined"&&self)||(typeof i!=="undefined"&&i);var y={searchParams:"URLSearchParams" in i,iterable:"Symbol" in i&&"iterator" in Symbol,blob:"FileReader" in i&&"Blob" in i&&(function(){try{new Blob();return true}catch(A){return false}})(),formData:"FormData" in i,arrayBuffer:"ArrayBuffer" in i};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(y.arrayBuffer){var z=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var k=ArrayBuffer.isView||function(A){return A&&z.indexOf(Object.prototype.toString.call(A))>-1}}function p(A){if(typeof A!=="string"){A=String(A)}if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A===""){throw new TypeError("Invalid character in header field name")}return A.toLowerCase()}function q(A){if(typeof A!=="string"){A=String(A)}return A}function m(A){var B={next:function(){var C=A.shift();return{done:C===undefined,value:C}}};if(y.iterable){B[Symbol.iterator]=function(){return B}}return B}function j(A){this.map={};if(A instanceof j){A.forEach(function(C,B){this.append(B,C)},this)}else{if(Array.isArray(A)){A.forEach(function(B){this.append(B[0],B[1])},this)}else{if(A){Object.getOwnPropertyNames(A).forEach(function(B){this.append(B,A[B])},this)}}}}j.prototype.append=function(A,C){A=p(A);C=q(C);var B=this.map[A];this.map[A]=B?B+", "+C:C};j.prototype["delete"]=function(A){delete this.map[p(A)]};j.prototype.get=function(A){A=p(A);return this.has(A)?this.map[A]:null};j.prototype.has=function(A){return this.map.hasOwnProperty(p(A))};j.prototype.set=function(A,B){this.map[p(A)]=q(B)};j.prototype.forEach=function(A,C){for(var B in this.map){if(this.map.hasOwnProperty(B)){A.call(C,this.map[B],B,this)}}};j.prototype.keys=function(){var A=[];this.forEach(function(C,B){A.push(B)});return m(A)};j.prototype.values=function(){var A=[];this.forEach(function(B){A.push(B)});return m(A)};j.prototype.entries=function(){var A=[];this.forEach(function(C,B){A.push([B,C])});return m(A)};if(y.iterable){j.prototype[Symbol.iterator]=j.prototype.entries}function c(A){if(A.bodyUsed){return Promise.reject(new TypeError("Already read"))}A.bodyUsed=true}function h(A){return new Promise(function(C,B){A.onload=function(){C(A.result)};A.onerror=function(){B(A.error)}})}function t(A){var C=new FileReader();var B=h(C);C.readAsArrayBuffer(A);return B}function u(A){var C=new FileReader();var B=h(C);C.readAsText(A);return B}function s(A){var D=new Uint8Array(A);var B=new Array(D.length);for(var C=0;C<D.length;C++){B[C]=String.fromCharCode(D[C])}return B.join("")}function b(A){if(A.slice){return A.slice(0)}else{var B=new Uint8Array(A.byteLength);B.set(new Uint8Array(A));return B.buffer}}function a(){this.bodyUsed=false;this._initBody=function(A){this.bodyUsed=this.bodyUsed;this._bodyInit=A;if(!A){this._bodyText=""}else{if(typeof A==="string"){this._bodyText=A}else{if(y.blob&&Blob.prototype.isPrototypeOf(A)){this._bodyBlob=A}else{if(y.formData&&FormData.prototype.isPrototypeOf(A)){this._bodyFormData=A}else{if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)){this._bodyText=A.toString()}else{if(y.arrayBuffer&&y.blob&&l(A)){this._bodyArrayBuffer=b(A.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else{if(y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||k(A))){this._bodyArrayBuffer=b(A)}else{this._bodyText=A=Object.prototype.toString.call(A)}}}}}}}if(!this.headers.get("content-type")){if(typeof A==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else{if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else{if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}}}};if(y.blob){this.blob=function(){var A=c(this);if(A){return A}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else{if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else{if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}}}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=c(this);if(A){return A}if(ArrayBuffer.isView(this._bodyArrayBuffer)){return Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength))}else{return Promise.resolve(this._bodyArrayBuffer)}}else{return this.blob().then(t)}}}this.text=function(){var A=c(this);if(A){return A}if(this._bodyBlob){return u(this._bodyBlob)}else{if(this._bodyArrayBuffer){return Promise.resolve(s(this._bodyArrayBuffer))}else{if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}};if(y.formData){this.formData=function(){return this.text().then(d)}}this.json=function(){return this.text().then(JSON.parse)};return this}var n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function o(A){var B=A.toUpperCase();return n.indexOf(B)>-1?B:A}function w(B,C){if(!(this instanceof w)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}C=C||{};var A=C.body;if(B instanceof w){if(B.bodyUsed){throw new TypeError("Already read")}this.url=B.url;this.credentials=B.credentials;if(!C.headers){this.headers=new j(B.headers)}this.method=B.method;this.mode=B.mode;this.signal=B.signal;if(!A&&B._bodyInit!=null){A=B._bodyInit;B.bodyUsed=true}}else{this.url=String(B)}this.credentials=C.credentials||this.credentials||"same-origin";if(C.headers||!this.headers){this.headers=new j(C.headers)}this.method=o(C.method||this.method||"GET");this.mode=C.mode||this.mode||null;this.signal=C.signal||this.signal;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&A){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(A);if(this.method==="GET"||this.method==="HEAD"){if(C.cache==="no-store"||C.cache==="no-cache"){var D=/([?&])_=[^&]*/;if(D.test(this.url)){this.url=this.url.replace(D,"$1_="+new Date().getTime())}else{var E=/\?/;this.url+=(E.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function d(A){var B=new FormData();A.trim().split("&").forEach(function(C){if(C){var E=C.split("=");var D=E.shift().replace(/\+/g," ");var F=E.join("=").replace(/\+/g," ");B.append(decodeURIComponent(D),decodeURIComponent(F))}});return B}function r(C){var A=new j();var B=C.replace(/\r?\n[\t ]+/g," ");B.split(/\r?\n/).forEach(function(E){var F=E.split(":");var D=F.shift().trim();if(D){var G=F.join(":").trim();A.append(D,G)}});return A}a.call(w.prototype);function x(A,B){if(!(this instanceof x)){throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')}if(!B){B={}}this.type="default";this.status=B.status===undefined?200:B.status;this.ok=this.status>=200&&this.status<300;this.statusText="statusText" in B?B.statusText:"";this.headers=new j(B.headers);this.url=B.url||"";this._initBody(A)}a.call(x.prototype);x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})};x.error=function(){var A=new x(null,{status:0,statusText:""});A.type="error";return A};var v=[301,302,303,307,308];x.redirect=function(B,A){if(v.indexOf(A)===-1){throw new RangeError("Invalid status code")}return new x(null,{status:A,headers:{location:B}})};f.DOMException=i.DOMException;try{new f.DOMException()}catch(e){f.DOMException=function(B,C){this.message=B;this.name=C;var A=Error(B);this.stack=A.stack};f.DOMException.prototype=Object.create(Error.prototype);f.DOMException.prototype.constructor=f.DOMException}function g(B,A){return new Promise(function(G,E){var F=new w(B,A);if(F.signal&&F.signal.aborted){return E(new f.DOMException("Aborted","AbortError"))}var H=new XMLHttpRequest();function C(){H.abort()}H.onload=function(){var J={status:H.status,statusText:H.statusText,headers:r(H.getAllResponseHeaders()||"")};J.url="responseURL" in H?H.responseURL:J.headers.get("X-Request-URL");var I="response" in H?H.response:H.responseText;setTimeout(function(){G(new x(I,J))},0)};H.onerror=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)};H.ontimeout=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)};H.onabort=function(){setTimeout(function(){E(new f.DOMException("Aborted","AbortError"))},0)};function D(J){try{return J===""&&i.location.href?i.location.href:J}catch(I){return J}}H.open(F.method,D(F.url),true);if(F.credentials==="include"){H.withCredentials=true}else{if(F.credentials==="omit"){H.withCredentials=false}}if("responseType" in H){if(y.blob){H.responseType="blob"}else{if(y.arrayBuffer&&F.headers.get("Content-Type")&&F.headers.get("Content-Type").indexOf("application/octet-stream")!==-1){H.responseType="arraybuffer"}}}if(A&&typeof A.headers==="object"&&!(A.headers instanceof j)){Object.getOwnPropertyNames(A.headers).forEach(function(I){H.setRequestHeader(I,q(A.headers[I]))})}else{F.headers.forEach(function(J,I){H.setRequestHeader(I,J)})}if(F.signal){F.signal.addEventListener("abort",C);H.onreadystatechange=function(){if(H.readyState===4){F.signal.removeEventListener("abort",C)}}}H.send(typeof F._bodyInit==="undefined"?null:F._bodyInit)})}g.polyfill=true;if(!i.fetch){i.fetch=g;i.Headers=j;i.Request=w;i.Response=x}f.Headers=j;f.Request=w;f.Response=x;f.fetch=g;Object.defineProperty(f,"__esModule",{value:true})})));

/*
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
(function(b){var d;if(typeof define==="function"&&define.amd){define(b);d=true}if(typeof exports==="object"){module.exports=b();d=true}if(!d){var c=window.Cookies;var a=window.Cookies=b();a.noConflict=function(){window.Cookies=c;return a}}}(function(){function b(){var e=0;var g={};for(;e<arguments.length;e++){var d=arguments[e];for(var f in d){g[f]=d[f]}}return g}function a(d){return d.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function c(e){function d(){}function g(k,n,i){if(typeof document==="undefined"){return}i=b({path:"/"},d.defaults,i);if(typeof i.expires==="number"){i.expires=new Date(new Date()*1+i.expires*86400000)}i.expires=i.expires?i.expires.toUTCString():"";try{var l=JSON.stringify(n);if(/^[\{\[]/.test(l)){n=l}}catch(j){}n=e.write?e.write(n,k):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent);k=encodeURIComponent(String(k)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var m="";for(var h in i){if(!i[h]){continue}m+="; "+h;if(i[h]===true){continue}m+="="+i[h].split(";")[0]}return(document.cookie=k+"="+n+m)}function f(o,n){if(typeof document==="undefined"){return}var m={};var j=document.cookie?document.cookie.split("; "):[];var l=0;for(;l<j.length;l++){var q=j[l].split("=");var h=q.slice(1).join("=");if(!n&&h.charAt(0)==='"'){h=h.slice(1,-1)}try{var p=a(q[0]);h=(e.read||e)(h,p)||a(h);if(n){try{h=JSON.parse(h)}catch(k){}}m[p]=h;if(o===p){break}}catch(k){}}return o?m[o]:m}d.set=g;d.get=function(h){return f(h,false)};d.getJSON=function(h){return f(h,true)};d.remove=function(i,h){g(i,"",b(h,{expires:-1}))};d.defaults={};d.withConverter=c;return d}return c(function(){})}));

/*
 * Elbphilharmonie Webshop API V2
 * Copyright spiritec GmbH
 */
(function(){if(typeof window.elbphilharmonie=="object"&&typeof window.elbphilharmonie.WebshopApi=="object"){return}var a=function(){var c=this;c.versionInfo="2.0";var p=false;var h="https://shop.elbphilharmonie.de/api/";var g="https://cdn.elbphilharmonie.de/api/";var j="https://shop.elbphilharmonie.de/en/cart/";var V="https://shop.elbphilharmonie.de/en/my-data/";var U="onSuccessfulLogin";var i="ElbphilharmonieLive_AppHash";var d="ElbphilharmonieLive_ActivityId";var o=".elbphilharmonie.de";var Q="en";var am="Min.";var aq="Elbphilharmonie.Webshop.Hash";var au="Elbphilharmonie.Webshop.ValidUntil";var an="Elbphilharmonie.Webshop.ActivityId";var ao="Elbphilharmonie.Webshop.CartInfo";var at="Elbphilharmonie.Webshop.UserInfo";var ap="Elbphilharmonie.Webshop.EventListHash";var ar="Elbphilharmonie.Webshop.TimeOffsetInSeconds";var f=false;var s=[];var t=undefined;var u=false;var aa,v,q;var S,T,P,l,X,W,m,e,av,I;var aw,k,L,ai,n,J,M,N;var x,w,F,E,B,A,z,y,H,G,D,C,K,r;var O=false;var ab=[];c.intialize=function(az,aA){S("debugging is enabled");if(!l()){az=undefined;return}aw();try{aA()}catch(ax){T('"onWebshopApiReady" threw an exception! - Message: '+ax)}k(aa);if(f){var ay=I(15);J(ay)}window.setInterval(q,15000)};aa=function(){O=true;for(var ax=0;ax<ab.length;ax++){ab[ax]()}ab=[]};v=function(ax){if(O){ax();return}ab.push(ax)};var R=undefined;q=function(){c.getCartInfo().then(function(aA){if(aA.itemCount>0&&aA.validUntil!==""){var aC=Date.parse(aA.validUntil);var aB=new Date();if(aB>aC){L();return}}if(typeof R=="undefined"){z(aA);return}if(R.itemCount===aA.itemCount&&R.validUntil===aA.validUntil&&R.validUntilInfo===aA.validUntilInfo){return}z(aA)});if(f){var az=I(15);var ay=s;var ax=function(){var aE=K();var aB=function(aI,aG){var aH=aI.filter(function(aJ){return aG.toString()===aJ.identifier.toString()});if(aH.length>0){return aH[0]}else{return null}};for(var aC=0;aC<aE.length;aC++){var aD=aE[aC];var aA=aB(s,aD);var aF=aB(ay,aD);if(aA==null&&aF==null){continue}if((aA==null&&aF!=null)||(aA!=null&&aF==null)){D(aD,aA);continue}if(aA.bookableFrom!==aF.bookableFrom||aA.bookableTo!==aF.bookableTo||aA.identifier!==aF.identifier||aA.salesInfo!==aF.salesInfo||aA.salesInfoDetails.length!==aF.salesInfoDetails.length||aA.link!==aF.link){D(aD,aA);continue}}};if(u){J(az,ax)}else{J(az)}}k()};c.getActivityId=function(){return new Promise(function(az,ay){var ax=function(){var aA=sessionStorage.getItem(an);if(typeof aA=="string"){az(aA)}else{ay()}};v(ax)})};c.getCartInfo=function(){return new Promise(function(az,ay){var ax=function(){var aA=sessionStorage.getItem(ao);var aE={isEmpty:true,itemCount:0,validUntil:"",validUntilInfo:""};if(typeof aA!="string"){az(aE);return}var aB=JSON.parse(aA);if(aB==null||aB.itemCount===0){az(aE);return}var aJ=Date.parse(aB.validUntil);var aD=0;var aH=new Date();if(aH<aJ){var aC=aJ-aH;var aF=Math.floor(aC/1000/60/60);aD=aF*60;if(aF<10){aF="0"+aF}aC-=aF*1000*60*60;var aG=Math.floor(aC/1000/60);aD=aD+aG}else{az(aE);return}var aK="";var aL="";if(aB.itemCount>0){aK=aB.validUntil;aL=aD+" "+am}var aI={isEmpty:aB.itemCount===0,itemCount:aB.itemCount,validUntil:aK,validUntilInfo:aL};az(aI)};v(ax)})};c.getUserInfo=function(){return new Promise(function(az,ay){var ax=function(){var aA=sessionStorage.getItem(at);var aC={isLoggedIn:false,userIdentifier:"",userInfo:"",customerNumber:""};if(typeof aA!="string"){az(aC);return}var aB=JSON.parse(aA);if(aB==null){az(aC);return}az({isLoggedIn:true,userIdentifier:aB.identifier,userInfo:aB.name,customerNumber:aB.customerNumber})};v(ax)})};c.getSalesInfo=function(ax){return new Promise(function(aC,aB){var aA=I(15);var ay=sessionStorage.getItem(ap);if(typeof ay=="string"){aA+=ay}var az=function(){var aF=undefined;if(P(ax)){var aE=function(aG){return ax.filter(function(aH){return aH===aG.identifier}).length>0};aF=s.filter(aE)}else{if(typeof ax=="number"||typeof ax=="string"){var aD=s.filter(function(aG){return ax.toString()===aG.identifier.toString()});if(aD.length>0){aF=aD[0]}else{aF=null}}}if(typeof aF=="undefined"){aB("No valid identifier or array of identifiers provided!")}else{if(aF==null){aB()}else{aC(aF)}}};if(aA===t){az();return}J(aA,az)})};c.logout=function(){return new Promise(function(az,ay){var ax=Cookies.get(d);if(typeof ax!="string"||ax===""){S("Logout: We are not logged in!");az();return}var aA=X("webshop/logout")+"?activity="+encodeURIComponent(ax)+"&language="+encodeURIComponent(Q);S("Logout: "+aA+" | ActivityId: "+ax);M(aA).then(function(aB){ai(aB);n();B();az()}).catch(function(aB){L(az)})})};c.getLoginUrl=function(ax){return new Promise(function(az,ay){if(typeof ax!="string"||ax===""){az(V)}else{az(e(V,U,ax))}})};c.getCartUrl=function(){return new Promise(function(ay,ax){ay(j)})};var Y=[];var ag=[];var ac=[];var Z=[];var ah=[];var af=[];c.onActivityIdChange=function(ax){if(typeof ax=="function"&&!r(Y,ax)){Y.push(ax)}};c.onSessionTimeout=function(ax){if(typeof ax=="function"&&!r(ag,ax)){ag.push(ax)}};c.onLogout=function(ax){if(typeof ax=="function"&&!r(ac,ax)){ac.push(ax)}};c.onCartInfoChange=function(ax){if(typeof ax=="function"&&!r(Z,ax)){Z.push(ax)}};c.onUserInfoChange=function(ax){if(typeof ax=="function"&&!r(ah,ax)){ah.push(ax)}};c.onSalesInfoChange=function(ay,ax){if(typeof ax!="function"){return}var aA=function(aD){for(var aC=0;aC<af.length;aC++){if(af[aC].identifier!==aD){continue}var aB=af[aC].eventHandler;if(r(aB,ax)){return}aB.push(ax);return}af.push({identifier:aD,eventHandler:new Array(ax)});f=true};if(P(ay)){for(var az=0;az<ay.length;az++){if(typeof ay[az]=="number"||typeof ay[az]=="string"){aA(ay[az])}}}else{if(typeof ay=="number"||typeof ay=="string"){aA(ay)}else{S('onSalesInfoChange: Cannot register identifier "'+ay+'".')}}};x=function(ax){setTimeout(function(){w(ax)},1)};w=function(ax){for(var az=0;az<Y.length;az++){try{Y[az](ax)}catch(ay){T('The "ActivityIdChangeEvent" threw an exception! - Message: '+ay)}}};F=function(){setTimeout(function(){E()},1)};E=function(){for(var ay=0;ay<ag.length;ay++){try{ag[ay]()}catch(ax){T('The "SessionTimeoutEvent" threw an exception! - Message: '+ax)}}};B=function(){setTimeout(function(){A()},1)};A=function(){for(var ay=0;ay<ac.length;ay++){try{ac[ay]()}catch(ax){T('The "LogoutEvent" threw an exception! - Message: '+ax)}}};z=function(ax){setTimeout(function(){y(ax)},1)};y=function(ax){R=ax;for(var az=0;az<Z.length;az++){try{Z[az](ax)}catch(ay){T('The "CartInfoChangeChangeEvent" threw an exception! - Message: '+ay)}}};H=function(ax){setTimeout(function(){G(ax)},1)};G=function(ax){for(var az=0;az<ah.length;az++){try{ah[az](ax)}catch(ay){T('The "UserInfoChangeEvent" threw an exception! - Message: '+ay)}}};D=function(ay,ax){setTimeout(function(){C(ay,ax)},1)};C=function(aB,ax){for(var aA=0;aA<af.length;aA++){if(af[aA].identifier!==aB){continue}var ay=af[aA].eventHandler;for(var aC=0;aC<ay.length;aC++){try{ay[aC](ax)}catch(az){T('The "SalesInfoChangeEvent" (Identifier: '+aB+") threw an exception! - Message: "+az)}}}};r=function(ay,ax){var az=function(aA){return aA===ax};return ay.filter(az).length>0};K=function(){var ay=[];for(var ax=0;ax<af.length;ax++){ay.push(af[ax].identifier)}return ay};aw=function(){var ax=sessionStorage.getItem(au);if(ax&&Date.parse(ax)>new Date()){return}sessionStorage.removeItem(au);sessionStorage.removeItem(aq);sessionStorage.removeItem(an);sessionStorage.removeItem(ao);sessionStorage.removeItem(at)};k=function(ay){var ax=Cookies.get(i);var az=sessionStorage.getItem(aq);if(typeof ax=="string"&&ax===az){if(typeof ay=="function"){ay()}return}L(ay)};L=function(ay){var ax=Cookies.get(d);if(typeof ax!="string"){ax=""}var az=X("webshop")+"?activity="+encodeURIComponent(ax)+"&language="+encodeURIComponent(Q);S("Loading status from service: "+az+" | ActivityId: "+ax);M(az).then(ai).catch(function(aA){if(av(an,"")){x("")}if(av(ao,null)){z(null)}if(av(at,null)){H(null)}}).finally(function(){if(typeof ay=="function"){ay()}n()})};ai=function(aA){Cookies.set(d,aA.activityId,{expires:new Date(Date.parse(aA.activityTimeout)),domain:o});Cookies.set(i,aA.appHash,{expires:new Date(Date.parse(aA.activityTimeout)),domain:o});av(au,aA.activityTimeout);if(av(an,aA.activityId)){x(aA.activityId)}if(av(ao,aA.cartInfo)){c.getCartInfo().then(function(aE){z(aE)})}av(ap,aA.eventListHash);try{var aB=new Date(Date.parse(aA.timestamp)).getTime();var az=new Date().getTime();var aC;if(Math.abs(az-aB)>2000){aC=Math.floor((aB-az)/1000)-1}else{aC=0}av(ar,aC)}catch(ax){}var ay=function(){var aE=sessionStorage.getItem(at);return typeof aE=="string"&&JSON.parse(aE)!=null};var aD=ay();if(av(at,aA.userInfo)){c.getUserInfo().then(function(aE){H(aE)});if(aD&&!ay()){B()}}};n=function(){var ax=Cookies.get(i);sessionStorage.setItem(aq,ax)};J=function(ay,ax){var az=W("webshop/event-list/"+Q+"/"+ay);S("Loading events from service: "+az);M(az).then(function(aA){if(!P(aA)){s=[];return}s=aA}).catch(function(){s=[]}).finally(function(){t=ay;u=true;if(typeof ax=="function"){ax()}})};M=function(az){var ay=function(aA){if(aA.status>=200&&aA.status<300){return Promise.resolve(aA)}else{return Promise.reject(aA)}};var ax=function(aA){return aA.json()};return fetch(az).then(ay).then(ax)};N=function(aB,ax){var aA=function(aC){if(aC.status>=200&&aC.status<300){return Promise.resolve(aC)}else{return Promise.reject(aC)}};var ay=function(aC){return aC.json()};var az={method:"post",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(ax)};return fetch(aB,az).then(aA).then(ay)};S=function(ax){if(p){T(ax)}};T=function(ax){console.log("Webshop API (V "+c.versionInfo+"): "+ax)};P=function(ax){if(typeof ax==="undefined"){return false}if(typeof Array.isArray==="undefined"){return Object.prototype.toString.call(ax)==="[object Array]"}return Array.isArray(ax)};l=function(){var ay=typeof h=="string"&&h!=="";var ax=typeof g=="string"&&g!=="";var az=typeof V=="string"&&V!=="";var aA=typeof U=="string"&&U!=="";if(!ay){S('ERROR: Injected "apiUrl" param is not set correctly!')}if(!ax){S('ERROR: Injected "apiCdnUrl" param is not set correctly!')}if(!az){S('ERROR: Injected "loginUrl" param is not set correctly!')}if(!aA){S('ERROR: Injected "loginReturnParamName" param is not set correctly!')}return ay&&ax&&az&&aA};X=function(ax){return m(h,ax)};W=function(ax){return m(g,ax)};m=function(ax,ay){if(ax[ax.length-1]==="/"){if(ay[0]==="/"){return ax+ay.substring(1)}else{return ax+ay}}else{if(ay[0]==="/"){return ax+ay}else{return ax+"/"+ay}}};e=function(ax,aA,aB){var aD=ax;var ay="";var aC="";var az=aD.indexOf("#");if(az>0){ay=aD.substring(az);aD=aD.substring(0,az)}az=aD.indexOf("?");if(az>0){aC=aD.substring(az);aD=aD.substring(0,az)}if(aC===""){aC="?"}else{aC+="&"}aC+=aA+"="+encodeURIComponent(aB);return aD+aC+ay};av=function(ay,aA){var az;if(typeof aA=="object"){az=JSON.stringify(aA)}else{az=aA}var ax=sessionStorage.getItem(ay);sessionStorage.setItem(ay,az);return ax!==az};I=function(ax){var az=sessionStorage.getItem(ar);var aA;if(typeof az=="number"&&az!==0){aA=new Date(new Date().getTime()+az*1000)}else{aA=new Date()}var ay=aA.getUTCFullYear().toString();var aB=aA.getUTCMonth();if(aB<10){ay+="0"}ay+=aB.toString();aB=aA.getUTCDay();if(aB<10){ay+="0"}ay+=aB.toString();aB=aA.getUTCHours();if(aB<10){ay+="0"}ay+=aB.toString();aB=aA.getUTCMinutes();if(aB<10){ay+="0"}ay+=aB.toString();if(ax<=0||ax>=60){return ay}aB=Math.trunc(aA.getUTCSeconds()/ax)*ax;if(aB<10){ay+="0"}ay+=aB.toString();return ay};var ak=false;var aj=false;var al=[];var ad=function(){if(ak){return}ak=true;for(var ax=0;ax<al.length;ax++){al[ax]()}ak=[]};var ae=function(){if(document.readyState==="complete"){ad()}};c.ready=function(ax){if(ak){setTimeout(function(){ax()},1);return}else{al.push(ax)}if(document.readyState==="complete"||(!document.attachEvent&&document.readyState==="interactive")){setTimeout(ad,1)}else{if(!aj){if(document.addEventListener){document.addEventListener("DOMContentLoaded",ad,false);window.addEventListener("load",ad,false)}else{document.attachEvent("onreadystatechange",ae);window.attachEvent("onload",ad)}aj=true}}}};if(typeof window.elbphilharmonie!="object"){window.elbphilharmonie={}}if(typeof window.elbphilharmonie.WebshopApi!="object"){window.elbphilharmonie.WebshopApi=new a();var b=function(){window.elbphilharmonie.WebshopApi.intialize(window.elbphilharmonie.WebshopApi,function(){if(typeof(onWebshopApiReady)==="function"){onWebshopApiReady(window.elbphilharmonie.WebshopApi)}})};window.elbphilharmonie.WebshopApi.ready(b)}})();